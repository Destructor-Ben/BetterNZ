# TODO: change BNZ-RPS to APS instead?
# TODO: the develop polynesia focuses may need balancing

BNZ_create_polynesian_volunteer = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}
		
		create_unit = {
			division = " name = \"Polynesian Volunteers\" division_template = \"Polynesian Volunteers\" start_experience_factor = 0.1"
			owner = NZL
		}
	}
}

BNZ_develop_polynesian_economy_tooltip_effect = {
	random_state = {
		limit = {
			has_state_flag = NZL_BNZ_develop_polynesian_economy_Inf1
		}

		add_building_construction = {
			type = infrastructure
			level = 2
			instant_build = yes
		}

		add_extra_state_shared_building_slots = 1
	}
}

BNZ_develop_polynesian_economy_effect = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}

		limit = {
			free_building_slots = {
				building = infrastructure
				size > 1
			}
		}

		add_building_construction = {
			type = infrastructure
			level = 2
			instant_build = yes
		}
		
		add_extra_state_shared_building_slots = 1

		set_state_flag = NZL_BNZ_develop_polynesian_economy_Inf1
	}
}

BNZ_develop_polynesian_naval_bases_tooltip_effect_1 = {
	random_state = {
		limit = {
			has_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
		}

		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = dockyard
			level = 1
			instant_build = yes
		}
	}
}

BNZ_develop_polynesian_naval_bases_tooltip_effect_2 = {
	random_state = {
		limit = {
			has_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
		}

		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = dockyard
			level = 2
			instant_build = yes
		}
	}
}

BNZ_develop_polynesian_naval_bases_effect_1 = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}

		limit = {
			is_coastal = yes
			free_building_slots = {
				building = dockyard
				size > 1
				include_locked = yes
			}
		}

		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = dockyard
			level = 1
			instant_build = yes
		}

		set_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
	}
}

BNZ_develop_polynesian_naval_bases_effect_2 = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}

		limit = {
			is_coastal = yes
			free_building_slots = {
				building = dockyard
				size > 1
				include_locked = yes
			}
		}

		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = dockyard
			level = 2
			instant_build = yes
		}

		set_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
	}
}

BNZ_develop_polynesian_defenses_effect = {
	every_owned_state = {
		limit = {
			is_controlled_by = ROOT

			# BNZ-RPS (minus north and south island)
			OR = {
				state = 726 # Samoa
				state = 629 # Hawaii
				state = 684 # Caroline Islands
				state = 638 # Guam
				state = 641 # Tahiti
				state = 646 # Saipan
			}
		}

		add_building_construction = {
			type = coastal_bunker
			province = {
				all_provinces = yes
				limit_to_coastal = yes
			}
			level = 2
			instant_build = yes
		}

		# Extra forts on naval bases
		add_building_construction = {
			type = bunker
			province = {
				all_provinces = yes
				limit_to_naval_base = yes
			}
			level = 2
			instant_build = yes
		}

		add_building_construction = {
			type = coastal_bunker
			province = {
				all_provinces = yes
				limit_to_naval_base = yes
			}
			level = 3
			instant_build = yes
		}
	}
}
