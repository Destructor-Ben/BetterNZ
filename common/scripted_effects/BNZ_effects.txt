# TODO: change BNZ-RPS to APS instead?
# TODO: the develop polynesia focuses may need balancing

# Used in the Polynesian Volunteers focus
BNZ_create_polynesian_volunteer = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}
		
		create_unit = {
			division = " name = \"Polynesian Volunteers\" division_template = \"Polynesian Volunteers\" start_experience_factor = 0.1"
			owner = NZL
		}
	}
}


### Economy Development Focus ###
BNZ_develop_polynesian_economy_tooltip_effect = {
	random_state = {
		limit = {
			has_state_flag = NZL_BNZ_develop_polynesian_economy_Inf1
		}

		add_building_construction = {
			type = infrastructure
			level = 2
			instant_build = yes
		}

		add_extra_state_shared_building_slots = 1
	}
}

BNZ_develop_polynesian_economy_effect = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}

		limit = {
			free_building_slots = {
				building = infrastructure
				size > 1
			}
		}

		add_building_construction = {
			type = infrastructure
			level = 2
			instant_build = yes
		}
		
		add_extra_state_shared_building_slots = 1

		set_state_flag = NZL_BNZ_develop_polynesian_economy_Inf1
	}
}


### Naval Base Development Focus ###
BNZ_develop_polynesian_naval_bases_tooltip_effect_1 = {
	random_state = {
		limit = {
			has_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
		}

		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = dockyard
			level = 1
			instant_build = yes
		}
	}
}

BNZ_develop_polynesian_naval_bases_tooltip_effect_2 = {
	random_state = {
		limit = {
			has_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
		}

		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = dockyard
			level = 2
			instant_build = yes
		}
	}
}

BNZ_develop_polynesian_naval_bases_effect_1 = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}

		limit = {
			is_coastal = yes
			free_building_slots = {
				building = dockyard
				size > 1
				include_locked = yes
			}
		}

		add_extra_state_shared_building_slots = 1
		add_building_construction = {
			type = dockyard
			level = 1
			instant_build = yes
		}

		set_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
	}
}

BNZ_develop_polynesian_naval_bases_effect_2 = {
	random_owned_controlled_state = {
		# BNZ-RPS (minus north and south island)
		prioritize = {
			726 # Samoa
			629 # Hawaii
			684 # Caroline Islands
			638 # Guam
			641 # Tahiti
			646 # Saipan
		}

		limit = {
			is_coastal = yes
			free_building_slots = {
				building = dockyard
				size > 1
				include_locked = yes
			}
		}

		add_extra_state_shared_building_slots = 2
		add_building_construction = {
			type = dockyard
			level = 2
			instant_build = yes
		}

		set_state_flag = NZL_BNZ_develop_polynesian_naval_bases_DY
	}
}


# Adds forts to the islands
BNZ_develop_polynesian_defenses_effect = {
	every_owned_state = {
		limit = {
			is_controlled_by = ROOT

			# BNZ-RPS (minus north and south island)
			OR = {
				state = 726 # Samoa
				state = 629 # Hawaii
				state = 684 # Caroline Islands
				state = 638 # Guam
				state = 641 # Tahiti
				state = 646 # Saipan
			}
		}

		add_building_construction = {
			type = coastal_bunker
			province = {
				all_provinces = yes
				limit_to_coastal = yes
			}
			level = 2
			instant_build = yes
		}

		# Extra forts on naval bases
		add_building_construction = {
			type = bunker
			province = {
				all_provinces = yes
				limit_to_naval_base = yes
			}
			level = 2
			instant_build = yes
		}

		add_building_construction = {
			type = coastal_bunker
			province = {
				all_provinces = yes
				limit_to_naval_base = yes
			}
			level = 3
			instant_build = yes
		}
	}
}

# Used in the demand islands event
BNZ_transfer_demanded_islands = {
	# This has Taiwan, Pitcairn Island, and Easter Island added
	# BNZ-APS
	if = { # North Island
		limit = {
			controls_state = 284
		}
		ROOT = { transfer_state = 284 }
	}
	if = { # South Island
		limit = {
			controls_state = 723
		}
		ROOT = { transfer_state = 723 }
	}
	if = { # Samoa
		limit = {
			controls_state = 726
		}
		ROOT = { transfer_state = 726 }
	}
	if = { # Hawaii
		limit = {
			controls_state = 629
		}
		ROOT = { transfer_state = 629 }
	}
	if = { # Caroline Islands
		limit = {
			controls_state = 684
		}
		ROOT = { transfer_state = 684 }
	}
	if = { # Guam
		limit = {
			controls_state = 638
		}
		ROOT = { transfer_state = 638 }
	}
	if = { # Tahiti
		limit = {
			controls_state = 641
		}
		ROOT = { transfer_state = 641 }
	}
	if = { # Saipan
		limit = {
			controls_state = 646
		}
		ROOT = { transfer_state = 646 }
	}

	if = { # Taiwan
		limit = {
			controls_state = 524
		}
		ROOT = { transfer_state = 524 }
	}
	if = { # Johnston Atoll
		limit = {
			controls_state = 630
		}
		ROOT = { transfer_state = 630 }
	}
	if = { # Midway Island
		limit = {
			controls_state = 631
		}
		ROOT = { transfer_state = 631 }
	}
	if = { # Wake Island
		limit = {
			controls_state = 632
		}
		ROOT = { transfer_state = 632 }
	}
	if = { # Marshall Islands
		limit = {
			controls_state = 633
		}
		ROOT = { transfer_state = 633 }
	}
	if = { # Solomon Islands
		limit = {
			controls_state = 634
		}
		ROOT = { transfer_state = 634 }
	}
	if = { # New Caledonia
		limit = {
			controls_state = 635
		}
		ROOT = { transfer_state = 635 }
	}
	if = { # Fiji
		limit = {
			controls_state = 636
		}
		ROOT = { transfer_state = 636 }
	}
	if = { # Gilbert Islands
		limit = {
			controls_state = 639
		}
		ROOT = { transfer_state = 639 }
	}
	if = { # Phoenix Island
		limit = {
			controls_state = 642
		}
		ROOT = { transfer_state = 642 }
	}
	if = { # Ellice Islands
		limit = {
			controls_state = 643
		}
		ROOT = { transfer_state = 643 }
	}
	if = { # Iwo Jima
		limit = {
			controls_state = 645
		}
		ROOT = { transfer_state = 645 }
	}
	if = { # Palau
		limit = {
			controls_state = 647
		}
		ROOT = { transfer_state = 647 }
	}
	if = { # Marcus Island
		limit = {
			controls_state = 648
		}
		ROOT = { transfer_state = 648 }
	}
	if = { # Nauru
		limit = {
			controls_state = 725
		}
		ROOT = { transfer_state = 725 }
	}
	if = { # Line Islands
		limit = {
			controls_state = 727
		}
		ROOT = { transfer_state = 727 }
	}
	if = { # Nendo
		limit = {
			controls_state = 734
		}
		ROOT = { transfer_state = 734 }
	}
	if = { # Pitcairn
		limit = {
			controls_state = 270
		}
		ROOT = { transfer_state = 270 }
	}
	if = { # Easter Island
		limit = {
			controls_state = 948
		}
		ROOT = { transfer_state = 948 }
	}
}